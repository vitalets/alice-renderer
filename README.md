# alice-renderer

[![Build Status](https://travis-ci.org/vitalets/alice-renderer.svg?branch=master)](https://travis-ci.org/vitalets/alice-renderer)
[![npm](https://img.shields.io/npm/v/alice-renderer.svg)](https://www.npmjs.com/package/alice-renderer)
[![license](https://img.shields.io/npm/l/alice-renderer.svg)](https://www.npmjs.com/package/alice-renderer)

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è [–æ—Ç–≤–µ—Ç–æ–≤](https://tech.yandex.ru/dialogs/alice/doc/protocol-docpage/#response) –≤ –Ω–∞–≤—ã–∫–∞—Ö –ê–ª–∏—Å—ã. 
–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–π —Ñ–æ—Ä–º–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ-–≥–æ–ª–æ—Å–æ–≤–æ–π –æ—Ç–≤–µ—Ç —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∞—É–¥–∏–æ-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∫–Ω–æ–ø–æ–∫ –∏ –¥—Ä—É–≥–∏—Ö –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–π.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç [tagged template literals](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/template_strings).

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

<!-- toc -->

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)
  * [–ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä](#%D0%B1%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D0%B9-%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80)
  * [–ü—Ä–∏–º–µ—Ä —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏](#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%81-%D0%BC%D0%BE%D0%B4%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%82%D0%BE%D1%80%D0%B0%D0%BC%D0%B8)
  * [–ü—Ä–∏–º–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏](#%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%81-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%B0%D0%BC%D0%B8)
- [API](#api)
  * [reply](#reply)
  * [reply.end](#replyend)
  * [buttons(items, [defaults])](#buttonsitems-defaults)
  * [audio(name)](#audioname)
  * [effect(name)](#effectname)
  * [pause([ms])](#pausems)
  * [br([count])](#brcount)
  * [text(value)](#textvalue)
  * [tts(value)](#ttsvalue)
  * [textTts(textValue, ttsValue)](#textttstextvalue-ttsvalue)
- [–†–µ—Ü–µ–ø—Ç—ã](#%D1%80%D0%B5%D1%86%D0%B5%D0%BF%D1%82%D1%8B)
  * [–í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –º–∞—Å—Å–∏–≤—ã](#%D0%B2%D0%B0%D1%80%D0%B8%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D0%BE%D1%81%D1%82%D1%8C-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-%D0%BC%D0%B0%D1%81%D1%81%D0%B8%D0%B2%D1%8B)
  * [–ú–æ–¥—É–ª—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–æ–≤](#%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D1%8C-%D1%80%D0%B5%D0%BD%D0%B4%D0%B5%D1%80%D0%B8%D0%BD%D0%B3%D0%B0-%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D0%BE%D0%B2)
  * [–û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ª–æ–≤–∏–π](#%D0%BE%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D1%83%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D0%B9)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#%D0%BB%D0%B8%D1%86%D0%B5%D0%BD%D0%B7%D0%B8%D1%8F)

<!-- tocstop -->

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
npm i alice-renderer
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
–í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ç–µ–≥-—Ñ—É–Ω–∫—Ü–∏—é [`reply`](#reply) –∫ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–µ.
–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∏–º –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏ `text` –∏ `tts`, –≥–¥–µ –∑–∞–ø–∏—Å–∞–Ω–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞.
–ü—Ä–∏ —ç—Ç–æ–º –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–∑ —Å—Ç—Ä–æ–∫–∏ –≤—ã—Ä–µ–∑–∞—é—Ç—Å—è –∞–∫—Ü–µ–Ω—Ç—ã (`+`):
```js
const {reply} = require('alice-renderer');

const response = reply`–ö–∞–∫ –¥–µ–ª+–∞?`;

console.log(response);

/*
{
  text: '–ö–∞–∫ –¥–µ–ª–∞?',
  tts: '–ö–∞–∫ –¥–µ–ª+–∞?',
  end_session: false
}
*/
```

### –ü—Ä–∏–º–µ—Ä —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞–º–∏
–§—É–Ω–∫—Ü–∏–∏-–º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–±–æ–≥–∞—â–∞—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∏ –≥–æ–ª–æ—Å–æ–≤–æ–º –∫–∞–Ω–∞–ª–∞—Ö.
–ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä [`audio`](#audioname) –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–≤—É–∫ - –æ–Ω –∑–∞–ø–∏—à–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–µ `tts`:
```js
const {reply, audio} = require('alice-renderer');

reply`${audio('sounds-game-win-1')} –ö–∞–∫ –¥–µ–ª+–∞?`;

/*
{
  text: '–ö–∞–∫ –¥–µ–ª–∞?',
  tts: '<speaker audio="alice-sounds-game-win-1.opus"> –ö–∞–∫ –¥–µ–ª+–∞?',
  end_session: false
}
*/
```

–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä [`buttons`](#buttonsitems-defaults) –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏:
```js
const {reply, audio, buttons} = require('alice-renderer');

reply`
  ${audio('sounds-game-win-1')} –ö–∞–∫ –¥–µ–ª+–∞?
  ${buttons(['–û—Ç–ª–∏—á–Ω–æ', '–°—É–ø–µ—Ä'])}
`;

/*
{
  text: '–ö–∞–∫ –¥–µ–ª–∞?',
  tts: '<speaker audio="alice-sounds-game-win-1.opus"> –ö–∞–∫ –¥–µ–ª+–∞?',
  buttons: [
    {title: '–û—Ç–ª–∏—á–Ω–æ', hide: true},
    {title: '–°—É–ø–µ—Ä', hide: true},
  ],
  end_session: false
}
*/
```

–ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –æ—Ç–≤–µ—Ç –±–æ–ª–µ–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ `reply` –º–∞—Å—Å–∏–≤—ã –∑–Ω–∞—á–µ–Ω–∏–π:`${[item1, item2, ...]}`.
–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ–Ω–≥–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –≤—ã–±–µ—Ä–µ—Ç—Å—è –æ–¥–∏–Ω —Å–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç:
```js
const {reply, buttons} = require('alice-renderer');

reply`
  ${['–ü—Ä–∏–≤–µ—Ç', '–ó–¥–æ—Ä+–æ–≤–æ']}! –ö–∞–∫ –¥–µ–ª+–∞?
  ${buttons(['–û—Ç–ª–∏—á–Ω–æ', '–°—É–ø–µ—Ä'])}
`;

/*
{
  text: '–ó–¥–æ—Ä–æ–≤–æ! –ö–∞–∫ –¥–µ–ª–∞?',
  tts: '–ó–¥–æ—Ä+–æ–≤–æ! –ö–∞–∫ –¥–µ–ª+–∞?',
  buttons: [
    {title: '–û—Ç–ª–∏—á–Ω–æ', hide: true},
    {title: '–°—É–ø–µ—Ä', hide: true},
  ],
  end_session: false
}
*/
```

### –ü—Ä–∏–º–µ—Ä —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
–î–ª—è –ø—Ä–æ–±—Ä–æ—Å–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [`reply`](#reply) –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç—Ä–µ–ª–æ—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π:
```js
const {reply, pause, buttons} = require('alice-renderer');

const welcome = username => reply`
  ${['–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ', '–î–æ–±—Ä—ã–π –¥–µ–Ω—å']}, ${username}! ${pause(500)} –ö–∞–∫ –¥–µ–ª+–∞?
  ${buttons(['–û—Ç–ª–∏—á–Ω–æ', '–°—É–ø–µ—Ä'])}
`;

const response = welcome('–í–∏—Ç–∞–ª–∏–π –ü–æ—Ç+–∞–ø–æ–≤');

console.log(response);

/*
{
  text: '–î–æ–±—Ä—ã–π –¥–µ–Ω—å, –í–∏—Ç–∞–ª–∏–π –ü–æ—Ç–∞–ø–æ–≤! –ö–∞–∫ –¥–µ–ª–∞?',
  tts: '–î–æ–±—Ä—ã–π –¥–µ–Ω—å, –í–∏—Ç–∞–ª–∏–π –ü–æ—Ç+–∞–ø–æ–≤! - - - - - - - –ö–∞–∫ –¥–µ–ª+–∞?',
  buttons: [
    {title: '–û—Ç–ª–∏—á–Ω–æ', hide: true},
    {title: '–°—É–ø–µ—Ä', hide: true},
  ],
  end_session: false
}
*/
```
–ü–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–∞–∫–∂–µ –æ—á–∏—â–∞—é—Ç—Å—è –æ—Ç –∞–∫—Ü–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ –ø–æ–ª–µ `text`.

## API

### reply
–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. 
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ç–µ–≥-—Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è [template literal](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/template_strings): 
```js
 reply`—Å—Ç—Ä–æ–∫–∞`;
```
–§–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –¥–ª—è –ê–ª–∏—Å—ã, —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É –Ω–∞ —Ç–µ–∫—Å—Ç, –≥–æ–ª–æ—Å –∏ –∫–Ω–æ–ø–∫–∏. 
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—Ç—Ä–æ–∫–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –æ–±–∞ –ø–æ–ª—è `text` –∏ `tts`.
–ü—Ä–∏–º–µ–Ω—è—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –º–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏ –≥–æ–ª–æ—Å–æ–≤—É—é —á–∞—Å—Ç—å:

```js
reply`
  ${audio('sounds-game-win-1')} ${['–ü—Ä–∏–≤–µ—Ç', '–ó–¥–æ—Ä+–æ–≤–æ']}! ${pause(500)} –ö–∞–∫ –¥–µ–ª+–∞?
  ${buttons(['–û—Ç–ª–∏—á–Ω–æ', '–°—É–ø–µ—Ä'])}
`;

/*
{
  text: '–ó–¥–æ—Ä–æ–≤–æ! –ö–∞–∫ –¥–µ–ª–∞?',
  tts: '<speaker audio="alice-sounds-game-win-1.opus"> –ó–¥–æ—Ä+–æ–≤–æ! - - - - - - - –ö–∞–∫ –¥–µ–ª+–∞?',
  buttons: [
    {title: '–û—Ç–ª–∏—á–Ω–æ', hide: true},
    {title: '–°—É–ø–µ—Ä', hide: true},
  ],
  end_session: false
}
*/
```

### reply.end
–§–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —Ä–æ–≤–Ω–æ —Ç–∞–∫–∂–µ, –∫–∞–∫ –∏ [`reply`](#reply), –Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–µ—Å—Å–∏—é:

```js
reply.end`–î–æ –Ω–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á!`;

/*
{
  text: '–î–æ –Ω–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á!',
  tts: '–î–æ –Ω–æ–≤—ã—Ö –≤—Å—Ç—Ä–µ—á!',
  end_session: true
}
*/
```

### buttons(items, [defaults])
–î–æ–±–∞–≤–ª—è–µ—Ç –≤ –æ—Ç–≤–µ—Ç –∫–Ω–æ–ø–∫–∏.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **items** `{Array<String|Object>}` - —Ç–∞–π—Ç–ª—ã/–æ–ø–∏—Å–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫.
  * **defaults** `{?Object}` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã—Ö –∫–Ω–æ–ø–æ–∫.

–í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–º:
```js
reply`–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? ${buttons(['–î–∞', '–ù–µ—Ç'])}`;

/*
{
  text: '–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?',
  tts: '–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?',
  buttons: [
    {title: '–î–∞', hide: true},
    {title: '–ù–µ—Ç', hide: true},
  ],
  end_session: false
}
*/
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø –∫–Ω–æ–ø–æ–∫, —Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å—Ç–∞–≤–ª—è–µ–º `defaults`:
```js
reply`
  –•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? 
  ${buttons(['–î–∞', '–ù–µ—Ç'], {hide: false})}
`;

/*
{
  text: '–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?',
  tts: '–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?',
  buttons: [
    {title: '–î–∞', hide: false},
    {title: '–ù–µ—Ç', hide: false},
  ],
  end_session: false
}
*/
```

–î–ª—è –ø–æ–ª–Ω–æ–π –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏:
```js
reply`
  –•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? 
  ${buttons([
    {title: '–î–∞', payload: 'yes'},
    {title: '–ù–µ—Ç', payload: 'no'},
  ])}
`;

/*
{
  text: '–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?',
  tts: '–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?',
  buttons: [
    {title: '–î–∞', payload: 'yes', hide: true},
    {title: '–ù–µ—Ç', payload: 'no', hide: true},
  ],
  end_session: false
}
*/
```

### audio(name)
–î–æ–±–∞–≤–ª—è–µ—Ç –∑–≤—É–∫ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–∞–Ω–∞–ª.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **name** `{String}` - –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–≤—É–∫–∞ –∏–∑ [–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–≤—É–∫–æ–≤](https://tech.yandex.ru/dialogs/alice/doc/sounds-docpage/).

```js
reply`${audio('sounds-game-win-1')} –£—Ä–∞!`;

/*
{
  text: '–£—Ä–∞!',
  tts: '<speaker audio="alice-sounds-game-win-1.opus"> –£—Ä–∞!',
  end_session: false
}
*/
```
  
### effect(name)
–î–æ–±–∞–≤–ª—è–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **name** `{String}` - –Ω–∞–∑–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –∏–∑ [–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤](https://tech.yandex.ru/dialogs/alice/doc/speech-effects-docpage/).

```js
reply`${effect('hamster')} –Ø –≥–æ–≤–æ—Ä—é –∫–∞–∫ —Ö–æ–º—è–∫`;

/*
{
  text: '–Ø –≥–æ–≤–æ—Ä—é –∫–∞–∫ —Ö–æ–º—è–∫',
  tts: '<speaker effect="hamster"> –Ø –≥–æ–≤–æ—Ä—é –∫–∞–∫ —Ö–æ–º—è–∫',
  end_session: false
}
*/
```

### pause([ms])
–î–æ–±–∞–≤–ª—è–µ—Ç –ø–∞—É–∑—É.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **ms** `{?Number=500}` - –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –≤ –º–∏–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö.

```js
reply`–î–∞–π—Ç–µ –ø–æ–¥—É–º–∞—Ç—å... ${pause()} –í—ã –ø—Ä–∞–≤—ã!`;

/*
{
  text: '–î–∞–π—Ç–µ –ø–æ–¥—É–º–∞—Ç—å. –í—ã –ø—Ä–∞–≤—ã!',
  tts: '–î–∞–π—Ç–µ –ø–æ–¥—É–º–∞—Ç—å. - - - –í—ã –ø—Ä–∞–≤—ã!',
  end_session: false
}
*/
```

### br([count])
–î–æ–±–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª. –í—Å—Ç–∞–≤–∫–∞ `\n` –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç,
—Ç.–∫. –∏—Å—Ö–æ–¥–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫ –≤—ã—Ä–µ–∑–∞—é—Ç—Å—è –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ backticks `` `...` ``.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **count** `{?Number=1}` - –∫–æ–ª-–≤–æ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫.

```js
reply`–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å: ${br()} "–í –∫–∞–∫–æ–º –≥–æ–¥—É –æ—Ç–º–µ–Ω–∏–ª–∏ –∫—Ä–µ–ø–æ—Å—Ç–Ω–æ–µ –ø—Ä–∞–≤–æ?"`;

/*
{
  text: '–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å:\n"–í –∫–∞–∫–æ–º –≥–æ–¥—É –æ—Ç–º–µ–Ω–∏–ª–∏ –∫—Ä–µ–ø–æ—Å—Ç–Ω–æ–µ –ø—Ä–∞–≤–æ?"',
  tts: '–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å: "–í –∫–∞–∫–æ–º –≥–æ–¥—É –æ—Ç–º–µ–Ω–∏–ª–∏ –∫—Ä–µ–ø–æ—Å—Ç–Ω–æ–µ –ø—Ä–∞–≤–æ?"',
  end_session: false
}
*/
```

### text(value)
–î–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **value** `{String|Array<String>}` - —Å—Ç—Ä–æ–∫–∞ —Ç–µ–∫—Å—Ç–∞ (–∏–ª–∏ –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω —Å–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç).

–ù–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ —Ñ—Ä–∞–∑–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –º–Ω–æ–≥–æ—Ç–æ—á–Ω–∏–µ–º, —Ç–æ –º–Ω–æ–≥–æ—Ç–æ—á–Ω–∏–µ `...` –ª—É—á—à–µ –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª.
–ú–Ω–æ–≥–æ—Ç–æ—á–Ω–∏–µ –≤ –≥–æ–ª–æ—Å–µ —Å–æ–∑–¥–∞—Å—Ç –ª–∏—à—å –Ω–µ–Ω—É–∂–Ω—É—é –ø–∞—É–∑—É –≤ –∫–æ–Ω—Ü–µ.
```js
reply`–ñ–∏–∑–Ω—å —Å–ª–æ–∂–Ω–∞—è —à—Ç—É–∫–∞${text('...')}`;

/*
{
  text: '–ñ–∏–∑–Ω—å —Å–ª–æ–∂–Ω–∞—è —à—Ç—É–∫–∞...',
  tts: '–ñ–∏–∑–Ω—å —Å–ª–æ–∂–Ω–∞—è —à—Ç—É–∫–∞',
  end_session: false
}
*/
```

### tts(value)
–î–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—Ä–æ–∫—É —Ç–æ–ª—å–∫–æ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–∞–Ω–∞–ª.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **value** `{String|Array<String>}` - —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –≥–æ–ª–æ—Å–∞ (–∏–ª–∏ –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω —Å–ª—É—á–∞–π–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç).

–ü–æ–ª–µ–∑–Ω–æ –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è —ç–º–æ—Ü–∏–π:
```js
reply`${tts('–ô–æ—Ö–æ—Ö–æ!')} –í—ã —É–≥–∞–¥–∞–ª–∏!`;

/*
{
  text: '–í—ã —É–≥–∞–¥–∞–ª–∏!',
  tts: ''–ô–æ—Ö–æ—Ö–æ! –í—ã —É–≥–∞–¥–∞–ª–∏!',
  end_session: false
}
*/
```

### textTts(textValue, ttsValue)
–î–æ–±–∞–≤–ª—è–µ—Ç –ø–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –≤ —Ç–µ–∫—Å—Ç–æ–≤—É—é —á–∞—Å—Ç—å, –∞ –≤—Ç–æ—Ä–æ–π - –≤ –≥–æ–ª–æ—Å–æ–≤—É—é.  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  * **textValue** `{String|Array<String>}` - —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ø–æ–ª—è `text`.
  * **ttsValue** `{String|Array<String>}` - —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –ø–æ–ª—è `tts`.

–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –≤—ã–≤–æ–¥–µ –∑–Ω–∞—á–µ–Ω–∏–π –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è —ç–∫—Ä–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä email):
```js
reply`–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º –Ω–∞ –µ–º–µ–π–ª${textTts(': user1234@example.com', '. –û–Ω –Ω–∞ –≤–∞—à–µ–º —ç–∫—Ä–∞–Ω–µ.')}`;

/*
{
  text: '–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º –Ω–∞ –µ–º–µ–π–ª: user1234@example.com',
  tts: '–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–∞–º –Ω–∞ –µ–º–µ–π–ª. –û–Ω –Ω–∞ –≤–∞—à–µ–º —ç–∫—Ä–∞–Ω–µ.',
  end_session: false
}
*/
```

–ò–ª–∏ –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ emoji:
* –≤ —Ç–µ–∫—Å—Ç –ª—É—á—à–µ –∏—Ö –¥–æ–±–∞–≤–∏—Ç—å –±–µ–∑ –∑–Ω–∞–∫–æ–≤ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è (—Ç–∞–∫ —Å–º–æ—Ç—Ä–∏—Ç—Å—è –ª—É—á—à–µ)
* –≤ –≥–æ–ª–æ—Å –Ω–∞–æ–±–æ—Ä–æ—Ç –≤—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞–∫ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –±–µ–∑ emoji (—Ç–æ–≥–¥–∞ –ê–ª–∏—Å–∞ –ø—Ä–æ—á–∏—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω—Ç–æ–Ω–∞—Ü–∏–µ–π)

```js
reply`–û—Ç–ª–∏—á–Ω–æ${textTts(' üëå', '!')} –ë—É–¥–µ—Ç —Å–∫—É—á–Ω–æ - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å.`;

/*
{
  text: '–û—Ç–ª–∏—á–Ω–æ üëå –ë—É–¥–µ—Ç —Å–∫—É—á–Ω–æ - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å.',
  tts: '–û—Ç–ª–∏—á–Ω–æ! –ë—É–¥–µ—Ç —Å–∫—É—á–Ω–æ - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å.',
  end_session: false
}
*/
```

## –†–µ—Ü–µ–ø—Ç—ã

### –í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –º–∞—Å—Å–∏–≤—ã
–í–∞—Ä–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –æ—Ç–≤–µ—Ç–∞—Ö —É–¥–æ–±–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –º–∞—Å—Å–∏–≤—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```js
const greetingText = [
  '–ü—Ä–∏–≤–µ—Ç',
  '–ó–¥–æ—Ä+–æ–≤–æ',
  '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ',
  '–î–æ–±—Ä+–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å',
  '–ô–æ—Ö+–∞–Ω–≥–∞',
];

const greetingSound = [
  audio('sounds-game-win-1'),
  audio('sounds-game-win-2'),
  audio('sounds-game-win-3'),
];

const welcome = () => reply`
  ${greetingSound} ${greetingText}! –Ø –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –ê–ª–∏—Å–∞.
`;
```

### –ú–æ–¥—É–ª—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –æ—Ç–≤–µ—Ç–æ–≤
–í—Å—é —Ä–∞–±–æ—Ç—É –ø–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —É–¥–æ–±–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å. 
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É –Ω–∞–≤—ã–∫–∞ –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ –º–µ–Ω—è—Ç—å —ç—Ç–∏ —á–∞—Å—Ç–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ:

**replies.js**
```js
exports.welcome = () => reply`
  –ü—Ä–∏–≤–µ—Ç! –Ø –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –ê–ª–∏—Å–∞.
`;

exports.showMenu = username => reply`
  ${username}, –≤—ã –º–æ–∂–µ—Ç–µ —Å—Ä–∞–∑—É –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É –∏–ª–∏ —É–∑–Ω–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–∞–≤–∏–ª–∞—Ö.
  ${buttons(['–ù–∞—á–∞—Ç—å –∏–≥—Ä—É', '–ü—Ä–∞–≤–∏–ª–∞'])}
`;

exports.goodbye = () => reply.end`
  –û—Ç–ª–∏—á–Ω–æ! –ë—É–¥–µ—Ç —Å–∫—É—á–Ω–æ - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å.
`;
```

**logic.js**
```js
const replies = require('./replies');

function handleMenuRequest() {
  ...
  return replies.showMenu(session.username);
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ª–æ–≤–∏–π
–ú–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —É—Å–ª–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –ø—Ä—è–º –≤ —Ñ–æ—Ä–º–∏—Ä—É–µ–º—É—é —Å—Ç—Ä–æ–∫—É. Falsy –∑–Ω–∞—á–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–ø–∞–¥—É—Ç:
```js
exports.correctAnswer = score => reply`
  –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç!
  ${score > 100 && '–í—ã –Ω–∞–±—Ä–∞–ª–∏ –±–æ–ª—å—à–µ 100 –±–∞–ª–ª–æ–≤ –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –ø—Ä–∏–∑!'}
`;
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–π `reply`, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–∏ –≤ —É—Å–ª–æ–≤–∏–∏:
```js
exports.correctAnswer = score => reply`
  –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç!
  ${score > 100 && reply`${audio('sounds-game-win-1')}–í—ã –Ω–∞–±—Ä–∞–ª–∏ –±–æ–ª—å—à–µ 100 –±–∞–ª–ª–æ–≤ –∏ –ø–æ–ª—É—á–∞–µ—Ç–µ –ø—Ä–∏–∑!`}
`;
```

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT @ [Vitaliy Potapov](https://github.com/vitalets)
